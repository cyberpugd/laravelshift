{"version":3,"sources":["add-subcategory.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"add-subcategory.js","sourcesContent":["Vue.component('newsubcategory', {\r\n     template: '#rowTemplate',\r\n     data: function() {\r\n          return {\r\n               savingSubcategory: false\r\n          }\r\n     },\r\n     methods: {\r\n          saveSubcategory: function(event) {\r\n               event.preventDefault();\r\n               var form = $(event.target).closest('form');\r\n               // console.log(form);\r\n               // form.find('input').filter(':visible:first').focus();\r\n               this.savingSubcategory = true;\r\n               $.ajax({\r\n                    type: 'POST',\r\n                    url: form.data('url'),\r\n                    data: form.serialize(),\r\n                    success: function(data){\r\n                         if(data.location_matters == 1) {location_matters = 'Yes'; } else { location_matters = 'No'; }\r\n                         $('#activetable'+data.category+' tr:last')\r\n                         .after('<tr id=\"activetr'+data.subcategory_id+'\"><td>'+data.name+'</td><td>'+data.tags+'</td><td>'+location_matters+'</td><td>'+data.created_by+'</td><td>'+data.created_at+'</td><td></td></tr>');\r\n                         form.trigger('reset');\r\n                         this.savingSubcategory = false;\r\n                         form.find('input').filter(':visible:first').focus();\r\n                    }.bind(this),\r\n                    error: function(data) {\r\n                         var response = JSON.parse(data.responseText); \r\n                         this.savingSubcategory = false;\r\n                         $('#errors').append(response.name);\r\n                         $('#errors').show();\r\n                    }.bind(this)\r\n               });\r\n          }\r\n     },\r\n});\r\nnew Vue({\r\n     el: '#addSubcategory'\r\n});\r\n$( document ).ready(function() {\r\n     \r\n     $('.inactive').removeClass('active');\r\n     \r\n\r\n});\r\n\r\nfunction inactivateSubcategory(event) {\r\n     event.preventDefault();\r\n     \r\n     var form = $(event.target).closest('form');\r\n      $.ajax({\r\n                    type: 'POST',\r\n                    url: form.data('url'),\r\n                    data: form.serialize(),\r\n                    success: function(data){\r\n                         $('#activetr'+data.subcategory_id).remove();  \r\n                         $('#inactivetable'+data.category+' tr:last')\r\n                         .after('<tr id=\"inactivetr'+data.subcategory_id+'\"><td>'+data.name+'</td><td>'+data.tags+'</td><td>'+data.created_by+'</td><td>'+data.created_at+'</td><td><strong>'+data.ticket_count+'</strong></td><td> <form data-url=\"/admin/category-management/activate-subcategory/'+data.subcategory_id+'\" method=\"POST\"><button type=\"submit\" class=\"btn btn-primary btn-sm\" onclick=\"activateSubcategory(event)\"><i class=\"fa fa-plus\"></i></button></form></td></tr>');                       \r\n                         var activeBadge = $('#activeBadge'+data.category).html();\r\n                         var inactiveBadge = $('#inactiveBadge'+data.category).html();\r\n                         $('#activeBadge'+data.category).html(Number(activeBadge)-1);\r\n                         $('#inactiveBadge'+data.category).html(Number(inactiveBadge)+1)\r\n                    },\r\n                    error: function(data) {\r\n                    }\r\n               });\r\n}\r\nfunction activateSubcategory(event) {\r\n     event.preventDefault();\r\n     var form = $(event.target).closest('form');\r\n      $.ajax({\r\n                    type: 'POST',\r\n                    url: form.data('url'),\r\n                    data: form.serialize(),\r\n                    success: function(data){\r\n                         $('#inactivetr'+data.subcategory_id).remove();  \r\n                         $('#activetable'+data.category+' tr:last')\r\n                         .after('<tr id=\"activetr'+data.subcategory_id+'\"><td>'+data.name+'</td><td>'+data.tags+'</td><td>'+data.created_by+'</td><td>'+data.created_at+'</td><td><strong>'+data.ticket_count+'</strong></td><td><form data-url=\"/admin/category-management/inactivate-subcategory/'+data.subcategory_id+'\" method=\"POST\"><button type=\"submit\" class=\"btn btn-danger btn-sm\" onclick=\"inactivateSubcategory(event)\"><i class=\"fa fa-minus\"></i></button></td></tr>');                       \r\n                           var activeBadge = $('#activeBadge'+data.category).html();\r\n                         var inactiveBadge = $('#inactiveBadge'+data.category).html();\r\n                         $('#activeBadge'+data.category).html(Number(activeBadge)+1);\r\n                         $('#inactiveBadge'+data.category).html(Number(inactiveBadge)-1)\r\n                    },\r\n                    error: function(data) {\r\n                    }\r\n               });\r\n}\r\n\r\nfunction inactivateCategory(event) {\r\n     event.preventDefault();\r\n     var form = $(event.target).closest('form');\r\n      $.ajax({\r\n                    type: 'POST',\r\n                    url: form.data('url'),\r\n                    data: form.serialize(),\r\n                    success: function(data){\r\n                         var activeButton = $('#activeButton'+data.category_id);\r\n                         var inactiveButton = $('#inactiveButton'+data.category_id);\r\n                        activeButton.hide();\r\n                        inactiveButton.show();\r\n                    },\r\n                    error: function(data) {\r\n                    }\r\n               });\r\n}\r\n\r\nfunction activateCategory(event) {\r\n     event.preventDefault();\r\n     \r\n     var form = $(event.target).closest('form');\r\n      $.ajax({\r\n                    type: 'POST',\r\n                    url: form.data('url'),\r\n                    data: form.serialize(),\r\n                    success: function(data){\r\n                        var activeButton = $('#activeButton'+data.category_id);\r\n                         var inactiveButton = $('#inactiveButton'+data.category_id);\r\n                        inactiveButton.hide();\r\n                        activeButton.show();\r\n                    },\r\n                    error: function(data) {\r\n                    }\r\n               });\r\n}\r\n\r\nfunction editMode(id) {\r\n     var name = $('#scname'+id);\r\n     var tags = $('#sctags'+id);\r\n     var locm = $('#scloc'+id);\r\n     console.log(locm.html());\r\n     var selected = \"\";\r\n     if(locm.html() == 'Yes') { selected = \"checked\"; }\r\n     var form1 = $(\"<input id='editscname\"+id+\"' type='text' name='name' value='\"+name.html()+\"'' class='form-control'>\");\r\n     var form2 = $(\"<input id='editsctags\"+id+\"' name='tags' type='text' value='\"+tags.html()+\"' class='form-control'>\")\r\n     var form3 = $(\"<div class='form-inline'><input id='editscloc\"+id+\"' name='loc_matters' type='checkbox' class='form-control' \"+selected+\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button class='btn btn-success' onclick='saveEdit(\"+id+\")'><i class='fa fa-floppy-o'></i></button>\")\r\n     name.html('');\r\n     tags.html('');\r\n     locm.html('');\r\n     form1.appendTo('#scname'+id);\r\n     form2.appendTo('#sctags'+id);\r\n     form3.appendTo('#scloc'+id);\r\n     $('#editMode'+id).attr('onclick', 'viewMode('+id+')');\r\n     $('#editMode'+id).attr('id', 'viewMode'+id);\r\n}\r\n\r\nfunction viewMode(id) {\r\n     var name=$('#editscname'+id).val();\r\n     var tags=$('#editsctags'+id).val();\r\n     var locm=$('#editscloc'+id).prop(\"checked\");\r\n     if(locm == true) { locm = 'Yes'; } else { locm = 'No'; } \r\n     $('#editscname'+id).remove();\r\n     $('#editsctags'+id).remove();\r\n     $('#editscloc'+id).remove();\r\n     $('#scname'+id).html(name);\r\n     $('#sctags'+id).html(tags);\r\n     $('#scloc'+id).html(locm);\r\n     $('#viewMode'+id).attr('onclick', 'editMode('+id+')');\r\n     $('#viewMode'+id).attr('id', 'editMode'+id);\r\n}\r\n\r\nfunction saveEdit(id) {\r\n     var name=$('#editscname'+id).val();\r\n     var tags=$('#editsctags'+id).val();\r\n     var locm=$('#editscloc'+id).prop(\"checked\");\r\n     \r\n     var values = {\r\n          'name':name,\r\n          'tags':tags,\r\n          'location_matters':locm,\r\n     };\r\n     $.ajax({\r\n                    type: 'POST',\r\n                    url: '/admin/category-management/edit-subcategory/'+id,\r\n                    data: values,\r\n                    success: function(data){\r\n                        $('#editscname'+id).remove();\r\n                        $('#editsctags'+id).remove();\r\n                        $('#editscloc'+id).remove();\r\n                         $('#scname'+id).html(data.name);\r\n                         $('#sctags'+id).html(data.tags);\r\n                         if(data.location_matters == 1) { location_matters = 'Yes'; } else { location_matters = 'No'; }\r\n                         $('#scloc'+id).html(location_matters);\r\n                         $('#viewMode'+id).attr('onclick', 'editMode('+id+')');\r\n                         $('#viewMode'+id).attr('id', 'editMode'+id);\r\n                    },\r\n                    error: function(data) {\r\n                    }\r\n               });\r\n\r\n}\r\n"]}